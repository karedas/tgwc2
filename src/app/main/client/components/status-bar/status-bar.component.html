<div class="tg-status-bar" *ngIf="hero$ | async as hero" fxHide.xs='true'>
  <div class="tg-status-bar-wrap" fxLayout="row">
    <div class="badges-left" fxLayout="row wrap" fxFlex="0 1 auto">

      <div class="badge" fxLayout fxLayoutAlign="center center">

        <!-- Speed -->

        <div class="badge-label">
          Vel.
        </div>
        <button mat-button [matMenuTriggerFor]="menuVelocita" class="tg-yellow with-label tg-status-bar--button">
          <span class="status-icon-box status-walk" [ngClass]="{
            'walk-0': (hero.walk == 'passeggio'),
            'walk-1': (hero.walk == 'camminata'),
            'walk-2': (hero.walk == 'marcia'),
            'walk-3': (hero.walk == 'corsa'),
            'walk-4': (hero.walk == 'scatto')}">
            <i></i>
          </span>
          {{hero.walk}}
          </button>
        <mat-menu #menuVelocita="matMenu" yPosition="above" class="compact">
          <ng-container *ngFor="let speed of speedValue; let i = index;">
            <button mat-menu-item *ngIf="speed.cmd" (click)="onClickButton(speed.cmd)" class="uppercase" style="font-size:.8em"
              [ngClass]="{'tg-yellow': (hero.walk === speed.msg)}">{{speed.msg}}</button>
          </ng-container>
        </mat-menu>

        <!-- Position -->

        <div class="badge-label">
          Pos.
        </div>
        <button mat-button [matMenuTriggerFor]="menuPosizione"
          *ngIf="hero.position"
          class="tg-yellow with-label tg-status-bar--button">
          <span class="status-icon-box status-position" [ngClass]="{
        'pos-0': (hero.position === '0'),
        'pos-2': (hero.position === '2'),
        'pos-3': (hero.position === '3'),
        'pos-4': (hero.position === '4'),
        'pos-5': (hero.position === '5'),
        'pos-6': (hero.position === '6')}">
            <i></i>
          </span>
          {{positionValue[hero.position].msg}}</button>
        <mat-menu #menuPosizione="matMenu" yPosition="above" class="compact">
          <ng-container *ngFor="let position of positionValue; let i = index;">
            <button mat-menu-item *ngIf="position.cmd" (click)="onClickButton(position.cmd)" class="uppercase" style="font-size:.8em"
              [ngClass]="{'tg-yellow': (+hero.position === i)}">{{position.msg}}</button>
          </ng-container>
        </mat-menu>

      </div>



      <div class="badge" fxLayout fxLayoutAlign="center center">

        <!-- Atteggiamento -->

        <div class="badge-label">
          Attegg.
        </div>
        <button mat-button [matMenuTriggerFor]="menuAtteggiamento" class="tg-lt-red with-label tg-status-bar--button">
          <span class="status-icon-box status-combat-attegg">
            <i></i>
          </span>
          {{hero.combat?.atteg}}
        </button>
        <mat-menu #menuAtteggiamento="matMenu" yPosition="above" class="compact">
          <button mat-menu-item (click)="onClickButton(attitude.cmd)" class="uppercase" style="font-size:.8em"
            *ngFor="let attitude of attitudeValue; let i = index;"
            [ngClass]="{'tg-lt-red': (hero.combat?.atteg === attitudeValue[i].msg)}">{{attitude.msg}}</button>
        </mat-menu>


        <!-- Difesa -->
        <ng-container *ngIf="hero.combat?.mod">
          <div class="badge-label">
            Difesa
          </div>
          <button mat-button [matMenuTriggerFor]="menuDifesa" class="tg-cyan with-label tg-status-bar--button">
            <span class="status-icon-box status-combat-mod" fxHide fxShow.gt-sm [ngClass]="{
                'mod-par-a': (hero.combat.mod === 'deflettere'),
                'mod-par-s': (hero.combat.mod === 'parare'),
                'mod-sch': (hero.combat.mod === 'schivare')}">
              <i></i>
            </span>
            {{hero.combat.mod}}</button>
          <mat-menu #menuDifesa="matMenu" yPosition="above" class="compact">
            <button mat-menu-item (click)="onClickButton(defense.cmd)" class="uppercase" style="font-size:.8em"
              *ngFor="let defense of defenseValue; let i = index;"
              [ngClass]="{'tg-cyan': (hero.combat.mod === defense.msg)}">{{defense.msg}}</button>
          </mat-menu>
        </ng-container>
      </div>

    </div>
    <div class="badges-right" fxHide fxShow.gt-sm>
      <div class="badge-text" 
        *ngIf="hero.wprc"  
        fxLayout fxLayoutAlign="center center" tooltip="Peso Trasportato" show-delay="500" placement="top">
        PT:&nbsp;<span 
          [ngClass]="
            {'tg-green': +hero.wprc < 25,
              'tg-yellow': +hero.wprc >= 25 && hero.wprc < 75,
              'tg-brown': +hero.wprc >= 75 && hero.wprc < 85,
              'tg-red': +hero.wprc >= 85 }">
          {{hero.wprc}} / 100 %</span>
      </div>
    </div>
  </div>
</div>
