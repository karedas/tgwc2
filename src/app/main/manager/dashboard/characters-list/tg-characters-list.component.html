<div id="characters">
  <!-- <span *ngFor="let item of charactersList">
    {{item | json}}
  </span> -->

  <ng-container *ngIf="charactersList  as chars; else noCharacters">
    <div class="comp-content">

      <div class="table-responsive">


        <table mat-table [dataSource]="charactersList" multiTemplateDataRows class="mat-table ch-table dark">

          <ng-container matColumnDef="image">
            <th mat-header-cell *matHeaderCellDef> Immagine </th>
            <td mat-cell *matCellDef="let element">
              <div class="ch-avatar mat-elevation-z4">
                <img src="{{env.media_address + element.image}}" />
                <div class="tg-base-logo big" *ngIf="!element.image"></div>
              </div>
            </td>
          </ng-container>

          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef> Nome/Dettagli </th>
            <td mat-cell *matCellDef="let element">
              <div class="ch-char-name tg-yellow"> {{element.name | capitalizeFirst}} </div>
              <div class="ch-char-ethnicity">{{element.race | getEthnicityByCode: element.ethnicity }}</div>
            </td>
          </ng-container>

          <ng-container matColumnDef="actions">
            <th mat-header-cell *matHeaderCellDef> Azioni </th>
            <td mat-cell *matCellDef="let element">
              <button mat-flat-button class="tg-button-thin" class="thin" color="accent"
                (click)="loginCharacter(element.name, element.secret, $event)" *ngIf="element.status === 1">
                <b>Connetti</b>
              </button>
            </td>
          </ng-container>

          <ng-container matColumnDef="expand">
            <th mat-header-cell *matHeaderCellDef></th>
            <td mat-cell *matCellDef="let element">
              <button mat-icon-button>
                <mat-icon>expand_more</mat-icon>
              </button>
            </td>
          </ng-container>

          <ng-container matColumnDef="expandedDetail">

            <td mat-cell *matCellDef="let element" [attr.colspan]="displayedColumns.length">
              <div class="element-detail" [@detailExpand]="element == expandedElement ? 'expanded' : 'collapsed'">
                <p>id: {{element.id}}</p>
                <p>Data creazione: {{element.createdDate}}</p>
                <div>
                  <span *ngIf="element.status === 2" class="tg-brown">Sospeso</span>
                  <span *ngIf="element.status === 1" class="tg-green">Attivo</span>
                  <span *ngIf="element.status === 0">Disabilitato</span>
                </div>
                <div class="ch-char-block">
                  Cambia immagine | Segnala un problema | Rimuovi dal tuo account | Disabilita
                </div>
              </div>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let element; columns: displayedColumns;" class="element-row"
            [class.expanded-row]="expandedElement === element"
            (click)="expandedElement = expandedElement === element ? null : element"></tr>
          <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="detail-row"></tr>

        </table>
      </div>
    </div>

  </ng-container>

  <!--  No Characters advice -->
  <ng-template #noCharacters>
    <div class="no-characters-box comp-content comp-padd" fxLayout="column" fxLayoutAlign="center center">
      <p>
        Non possiedi un personaggio attivo.
      </p>
      <button mat-raised-button color="accent" (click)="goToChractersManage()">
        Crea o Aggiungi
      </button>
    </div>
  </ng-template>

  <!-- <ng-container *ngif="let char of characters;">
    <table class="mat-elevation-z1">
      <tr>
        <td></td>
      </tr>
    </table>
  </ng-container> -->

</div>
