
<div id="characters" *ngIf="characters | async; let chars;">
  <h2 class="tg-brown comp-title">I tuoi personaggi</h2>
  
  <ng-container *ngIf="chars.length; else noCharacters">

    <div class="ch-header-action">
      <a href="#">Nuovo personaggio</a> | <a href="#">Aggiungi manualmente</a> | 
    </div>

    
    <mat-accordion class="mat-elevation-z4">
      <ng-container *ngFor="let char of chars;" >
        <mat-expansion-panel *ngIf="char.status !== 'disabled'" class="mat-elevation-z0">
  
          <mat-expansion-panel-header [collapsedHeight]="'auto'" [expandedHeight]="'auto'">
  
            <mat-panel-title fxLayout="row" fxLayoutGap="13px">
              <div class="ch-avatar mat-elevation-z4" fxFlex="0 0 75px">
                <img src="{{env.media_address + '/' + char.image}}" *ngIf="char.image !== ''" />
                <div class="tg-base-logo" *ngIf="!char.image"></div>
              </div>
              <div class="ch-infoaction" fxLayoutAlign="center start" fxLayout="column">
                <div class="ch-char-name"> {{char.name | capitalizeFirst}} </div>
                <div class="ch-char-subaction">
                  <a href="#">Cambia immagine</a>
                </div>
              </div>
            </mat-panel-title>
  
            <mat-panel-description>
              <div class="ch-char-action">
                <button mat-flat-button color="accent">Connetti</button>
              </div>
            </mat-panel-description>
  
          </mat-expansion-panel-header>
  
          <div class="ch-char-details">
            <table>
              <tr>
                <td>Razza:</td>
                <td>{{char.race | getEthnicityByCode: char.ethnicity }}</td>
              </tr>
              <tr>
                <td>Sesso:</td>
                <td>{{char.sex}}</td>
              </tr>
              <tr>
                <td>Et√†:</td>
                <td>{{char.age}}</td>
              </tr>
            </table>
            <button mat-flat-button color="warn">Disabilita personaggio</button>
          </div>
  
        </mat-expansion-panel>

      </ng-container>
    </mat-accordion>
    <p class="ch-count">
      <b>Totale</b>: {{maxCharacter - enabledCharactersNumber}} / {{maxCharacter}}
    </p>

  </ng-container>

  <!--  No Characters advice -->
  <ng-template #noCharacters>
    <div class="no-characters-box" fxLayout="column" fxLayoutAlign="center center">
      <p>
        Non possiedi ne hai creato alcun personaggio fino ad ora.
      </p>
        <button mat-raised-button color="accent">
          <mat-icon>add</mat-icon>
          Crea
        </button>
    </div>
  </ng-template>

  <!-- <ng-container *ngif="let char of characters;">
    <table class="mat-elevation-z1">
      <tr>
        <td></td>
      </tr>
    </table>
  </ng-container> -->

</div>

